"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class GnosisSafeProxyFactoryEthersContract {
    constructor(contract) {
        this.contract = contract;
    }
    getAddress() {
        return this.contract.address;
    }
    async createProxy({ safeMasterCopyAddress, initializer, saltNonce, options }) {
        var _a;
        const txResponse = await this.contract.createProxyWithNonce(safeMasterCopyAddress, initializer, saltNonce, options);
        const txReceipt = await txResponse.wait();
        const proxyCreationEvent = (_a = txReceipt.events) === null || _a === void 0 ? void 0 : _a.find(({ event }) => event === 'ProxyCreation');
        if (!proxyCreationEvent || !proxyCreationEvent.args) {
            throw new Error('Safe Proxy was not deployed correctly');
        }
        const proxyAddress = proxyCreationEvent.args[0];
        return proxyAddress;
    }
    encode(methodName, params) {
        return this.contract.interface.encodeFunctionData(methodName, params);
    }
}
exports.default = GnosisSafeProxyFactoryEthersContract;
//# sourceMappingURL=GnosisSafeProxyFactoryEthersContract.js.map